---
layout: post
title: "[Spring] AOP란? "
tags: [Spring, AOP]
date: 2023-09-26 23:49
last_modified_at: 2023-09-27 20:23

categories : [Spring]
toc:  true
toc_label: "AOP"
---

## Intro
> AOP에 대해서 정리한다.

## AOP란
> AOP(Aspect-Oriented Programming)이란 관점 지향 프로그래밍이라 불린다. <br>
> 관점 지향은 어떤 로직을 기준으로 핵심적인 관점, 부가적인 관점으로 나눠서 보고 그 관점을 기준으로 모듈화를 하는 것을 의미한다. <br>
> 핵심적인 관점이 비즈니스 로직이 될 수 있고 부가적인 관점은 핵심적인 로직이 실행되기 위해 행해지는 DB연결, 로깅, 파일 입출력 등이 있다. <br> 


AOP는 부가적인 관점에서 공통적으로 사용되는 코드가 있다면 해당 코드를 모듈화하여 공통 관심사로 분리한다. <br>
그리고 공통 관심사를 Aspect로 정의하고 Aspect를 적용할 메소드나 클래스에 Advice를 적용하여 공통 관심사와 핵심 관심사를 분리할 수 있다. <br> 
이렇게 AOP에서는 공통 관심사를 별도의 모듈로 분리하여 관리하며, 이를 통해 코드의 재사용성과 유지 보수성을 높일 수 있다.<br>

## AOP 예시
![img](https://user-images.githubusercontent.com/112313165/270698323-a813fae7-0e68-4e5a-807d-3e09722b6314.png)<br>

사진에서 보는 것과 같이 A,B,C 에 주황색 블록이 동일하게 존재한다. 이는 A,B,C 클래스에서 모두 동일하게 사용되는 코드를 의미한다.<br>

이 때, 주황색 블록 코드를 수정할 때 모든 클래스의 주황색 블록 코드를 수정해야 하기에 유지보수성이 안좋다는 것을 의미한다.<br>

주황색 블록을 Aspect X로 묶어서 모듈화 시킨 후 관리한다면 앞에서 설명한 문제점이 사라지고 유지보수성이 강화된다.<br>

위 예시와 같이 AOP(관점 지향 프로그래밍)는 소스코드에서 반복되는 코드들을 하나로 묶어 모듈화하여 재사용성과 유지보수성을 높인다는 강점이 있다. 또한 컨트롤러 단에서 코드들이 굉장히 깔끔해진다는 점도 있다.<br>

또 다른 예시로는 Controller단에서 공통적으로 유효성 검사(id 입력여부, passwd 대소문자 특수문자여부)를 했던 부분을 공통으로 처리하는 클래스를 만들어서 처리한다.


## AOP 용어
- Advice
  - Aspect 기능을 정의한 것으로, 공통 관심기능(메서드)을 의미한다.
  - 실질적으로 어떤 일을 해야할 지에 대한 것과 실질적인 부가기능을 담은 구현체이다.
  - 타깃에게 제공할 부가 기능을 담은 모듈로, 타깃이 필요 없는 순수한 부가 기능이다.
- Aspect
  - advice + pointcut을 모듈화 한 것.
  - 부가 기능을 정의한 Advice와 Advice를 어디에 적용할 지 결정하는 Pointcut을 함께 가진다.
  - 동작 시점을 5가지로 지정함.
    - before, after, after-running, after-throwing, around
- Pointcut
  - 특정 조건(execution)에 의해 필터링 된 JoinPoint를 말한다.
  - 수 많은 JoinPoint 중에서 특정 메서드에서만 공통기능을 수행시키기 위해 사용한다.
- JoinPoint
  - Advice를 적용 가능한 지점을 의미(before, after)
- Weaving
  - Advice가 핵심 기능에 삽입되는 과정을 말한다.
- Target
  - advice가 되는 객체, 부가 기능을 부여할 대상


## AOP 특징
- AOP는 스프링 Bean에서만 적용이 가능하기에 @Component를 통해서 Bean으로 등록해야 함.
## AOP 어노테이션
- @Aspect
  - AOP로 등록해주는 어노테이션
  - Aspect 모듈임을 명시하고, Bean에 등록한다.
- @Around
  - 메서드 실행 전 후 모두 제어(Before/After)
- @Before
  - 비즈니스 메서드 실행 전에 동작
  - @Before("메서드")
    - 해당 메서드 실행 전에 동작하도록 설정.
- @After
  - 비즈니스 메서드 실행 후에 동작




## 참고 사이트
[AOP 참고 사이트1](https://code-lab1.tistory.com/193)<br>
[AOP 참고 사이트1](https://velog.io/@backtony/Spring-AOP-%EC%B4%9D%EC%A0%95%EB%A6%AC)<br>


